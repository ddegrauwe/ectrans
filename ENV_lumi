module purge
module load LUMI/22.08 partition/G 
module load PrgEnv-cray/8.3.3 cce/15.0.0  
module load rocm/5.2.3

BASEDIR=${HOME}/deode/ectrans/lam/
SOURCEDIR=${BASEDIR}/sources
BUILDDIR=${BASEDIR}/build
INSTALLDIR=${BASEDIR}/install
TOOLCHAIN_FILE=${SOURCEDIR}/ectrans/toolchain_lumi.cmake

mkdir -p ${BASEDIR} ${SOURCEDIR} ${BUILDDIR} ${INSTALLDIR}

export CC=cc
export CXX=CC
export FC=ftn
export PATH=${PATH}:${INSTALLDIR}/ecbuild/bin/

export ECBUILD_TOOLCHAIN="${TOOLCHAIN_FILE}"
export CMAKE_BUILD_TYPE=RelWithDebInfo
export HIP_ROOT=${ROCM_PATH}/hip

cd ${BASEDIR}


